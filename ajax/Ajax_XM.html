<!--
	作者：931623824@qq.com
	时间：2017-05-15
	描述：ajax测试  测试内容     $.ajax
-->
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>json  单层</title>
		<script src="../framework/official/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
	
	</head>
	<body>
		
		<input type="button" class="ajaxbutton" value="ajax获取数据内容" />
		<input type="button" class="getjsonbutton" value="getjson获取数据内容"/>
		<ul></ul>
		
		<script type="text/javascript">
			$(function(){
				$(".ajaxbutton").on('click',function(){
//					$.ajax获取数据
					$.ajax({
//						要求为String类型的参数，（默认为当前页地址）发送请求的地址。
						url:"new_file.txt",
//						要求为String类型的参数，预期服务器返回的数据类型。如果不指定，JQuery将自动根据http包mime信息返回responseXML或responseText，并作为回调函数参数传递。可用的类型如下：
//						xml：返回XML文档，可用JQuery处理。
//						html：返回纯文本HTML信息；包含的script标签会在插入DOM时执行。
//						script：返回纯文本JavaScript代码。不会自动缓存结果。除非设置了cache参数。注意在远程请求时（不在同一个域下），所有post请求都将转为get请求。
//						json：返回JSON数据。
//						jsonp：JSONP格式。使用SONP形式调用函数时，例如myurl?callback=?，JQuery将自动替换后一个“?”为正确的函数名，以执行回调函数。
//						text：返回纯文本字符串。
						dataType:"json",
//						要求为String类型的参数，请求方式（post或get）默认为get。注意其他http请求方法，例如put和delete也可以使用，但仅部分浏览器支持。
						type:"GET",
//						data:{optionKey:2},
						success:function(data){
//							i表示在data中的索引位置，n表示包含的信息的对象 
							$.each(data,function(i,n){
								$("ul").append(n["optionValue"]+"<br />");
							})
						},
//						要求为Function类型的参数，请求失败时被调用的函数。该函数有3个参数，即XMLHttpRequest对象、错误信息、捕获的错误对象(可选)
						error:function(msg){
							
						}		
					});
				})
//				getjson获取数据
				$(".getjsonbutton").on("click",function(){
					$.getJSON("new_file.txt",function(data){
						$.each(data,function(index,ceshi){
							
								$("ul").append(ceshi["optionKey"]+"<br />");
							
						})
					})
				})
			})
		</script>
	</body>
</html>
